const e=document.querySelector(".form");function t({position:e,delay:t}){console.log(`Resolve promise ${e} in ${t}ms`)}function n({position:e,delay:t}){console.error(`Rejected promise ${e} in ${t}ms`)}e.addEventListener("submit",function(e){e.preventDefault();let o=new FormData(e.currentTarget),i=Object.fromEntries(o.entries());i.position=parseInt(i.position),i.delay=parseInt(i.delay),i.step=parseInt(i.step),i.amount=parseInt(i.amount),(function({delay:e,step:o,amount:i}){return new Promise((s,r)=>{let a=e,l=[];!function e(r){if(r>i){s(l);return}(function({position:e,delay:t}){let n=Math.random()>.3;return new Promise((o,i)=>{setTimeout(()=>{n?o({position:e,delay:t}):i({position:e,delay:t})},t)})})({position:r,delay:a}).then(e=>{l.push(e),t(e)}).catch(e=>{l.push(e),n(e)}).finally(()=>{a+=o,e(r+1)})}(1)})})(i).then(e=>{e.forEach(t)}).catch(n)});
//# sourceMappingURL=03-promises.695c7bc5.js.map
